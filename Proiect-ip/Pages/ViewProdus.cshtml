@page
@model Proiect_ip.Pages.ViewProdusModel
@{
    ViewData["Title"] = "Detalii produs";
}

<div class="container">
    <h2 class="text-center mb-5">Vizualizare produs @Model.Produs.Nume</h2>
    <hr />
    <div class="d-grid gap-2 mb-4">
        <a href="/ViewProduse" class="btn btn-secondary w-100">Înapoi <i class="bi bi-arrow-left-square"></i></a>
    </div>

    <hr />

    <!-- Structura produs: imagine și detalii -->
    <div class="row align-items-center">
        <!-- Coloană pentru imagine -->
        <div class="col-md-4 text-center">
            @if (Model.Produs.ImageData != null && Model.Produs.ImageData.Length > 0)
            {
                var imageBase64 = Convert.ToBase64String(Model.Produs.ImageData);
                var imageSrc = $"data:{Model.Produs.ImageType};base64,{imageBase64}";
                <img src="@imageSrc" class="img-fluid rounded mb-4" alt="Imagine produs">
            }
            else
            {
                <p class="text-muted">Imaginea nu este disponibilă.</p>
            }
        </div>

        <!-- Coloană pentru detalii produs -->
        <div class="col-md-8">
            <h4>Model: <strong>@Model.Produs.Nume</strong></h4>
            <h5>Brand: <strong>@Model.Produs.Brand.NumeBrand</strong></h5>
            <hr />
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <p>Descriere: <strong>@Model.Produs.Descriere</strong></p>
                </li>
                <li class="list-group-item">
                    <p>Categorie: <strong>@Model.Produs.Categorie.NumeCateg</strong></p>
                </li>
                <li class="list-group-item">
                    <p>
                        Disponibilitate:
                        <strong>
                            @if (Model.Produs.Stoc > 0)
                            {
                                <span class="text-success">În stoc</span>
                            }
                            else
                            {
                                <span class="text-danger">Nu este pe stoc</span>
                            }
                        </strong>
                    </p>
                </li>
            </ul>
            <h4 class="mt-3">Preț: <strong>@Model.Produs.Pret LEI</strong></h4>
            <div class="d-grid gap-2 mt-4">
                <button onclick="if (@Model.Produs.Stoc > 0) { addToCart(@Model.Produs.IdProdus); }" class="btn btn-info" @(Model.Produs.Stoc == 0 ? "disabled" : "")>
                    Adaugă în coș <i class="bi bi-bag-plus"></i>
                </button>
            </div>
        </div>
    </div>
</div>
